# BookStore macOS 发布说明

## 版本
- 应用包：BookStore.app（Release）
- Qt 版本：Qt 6（Homebrew qt@6，建议 6.9.x 或兼容版本）
- 运行平台：macOS 10.13+（Apple Silicon / Intel）

## 安装步骤（用户）
1. 安装 Qt 运行时
   - 推荐：在终端执行 `bash tools/install_qt_mac.sh`
   - 或手动：`brew install qt@6 && brew link qt@6 --force --overwrite`
2. 安装应用
   - 将 BookStore.app 拖动到 `/Applications`（或任意可读目录）。
3. 运行
   - 直接双击 BookStore.app。
   - 若出现“已损坏/无法打开”，执行：`xattr -dr com.apple.quarantine /Applications/BookStore.app`

## 验证
- 检查 Qt 是否就绪：`brew info qt@6`
- 检查二进制依赖：`otool -L /Applications/BookStore.app/Contents/MacOS/BookStore | head`
- 首次启动会自动创建数据目录：`~/Library/Application Support/BookStore/`

## 已知说明
- 本分发未内嵌 Qt 框架，需用户自行安装 qt@6。
- 若 Qt 版本不匹配导致缺库，可升级/重装 qt@6 后重试。
- 默认管理员账号存在于后端数据文件（root 账户），请按业务规则登录使用。

## 故障排查
- 缺少 Qt 库：重新运行 `bash tools/install_qt_mac.sh`。
- 权限/隔离：`xattr -dr com.apple.quarantine /Applications/BookStore.app`
- 日志：`log show --predicate 'process == "BookStore"' --last 5m`

## 打包者备注
- 构建命令：`cmake -DCMAKE_BUILD_TYPE=Release .. && cmake --build .`
- 产物位置：`build/BookStore.app`
- 未执行 macdeployqt（外部依赖模式）。
